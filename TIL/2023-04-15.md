
### **1. 오늘 겪은 문제**

**1.  mongoose의 _id 의 objectId 객체 다른 이름으로 클라이언트에 전달하기**
**2. express의 미들웨어?, 에러처리?**
**3. AWS의 배포에 대하여..**
[[배포 정리 ( AWS EC2, GITHUB, PM2, 가비아 )]]

### **2. 해본 시도**
**1.  mongoose의 _id 의 objectId 객체 다른 이름으로 클라이언트에 전달하기**
 - _id 를 false로 사용하지 않고 하는 방법
 - 새로운 객체의 타입을 mongoose.types.obejctid로 지정해주고 auto 옵션을 통해서 매번 새로운 objectid를 따로 생성하는 방법 (primary key가 2개가 되는 느낌)
 - virtaul 객체 사용해서 다른 이름으로 표현하기(표현은 하였지만 _id, id, postId 이렇게 중복되어서 여러개가 등장 그리고 _id 제외 불가능)
**2. express의 미들웨어?, 에러처리?**
- 반복적인 if구문 사용을 통해 해당 body or query의 값들을 판별하면서 진행 하였었다.
**3. AWS의 배포에 대하여..**
- 위의 정리 문서 참고!

### **3. 해결 방법**
1.  일단 해당 데이터를 모두 받아와서, map함수를 통해서 _id 의 이름을 모두 변경한 새로운 객체를 생성하여 반환해 주었다.
2. 미들웨어 파일을 하나 만들어서, 인증 혹인 점검을 하는 로직을 한 파일에서 구현한 다음에, 미들웨어에서 먼저 사용하여 점검해서 error시 error를 리턴하게 처리해주면 될 것 같다.

### **4. 새롭게 알게 된 점**
-  mongoose, mongodb에 대하여 알게 된 것들이 꽤 많다. schema에 사용하는 타입들이나, populate를 통해서 연관성을 정의할 수 있다는 지점과, pre함수를 통해서 cascade기능을 구현할 수 있다는 점을 알게 되었는데, cascade기능은 좀 사용하기 불편한 느낌이 있었다. 그러나 이것 또한 숙달해야할 과제인 것 같다.
- 생각보다 멀게 느끼던 배포과정이 조금은 가까워진 느낌이다. 간단한 배포의 과정에 대해서는 이제 잘 수행할 수 있을 것 같다. 그러나 배포 자동화라, 도커, 쿠버네티스 등 가야할 길은 더 많은 것 같다.


### **5. 오늘 더 개선 할 수 있었을 것 같은 지점은?**
- 확실히 주말은 유혹이 많다. 주말이나 휴일일 수록 효율적으로 일하기 위해서는 더 리마인드가 필요하다는 생각을 한다. 
- 모던 deep js 내용을 정리하다가 글로만 정리하는 것보다 시각화, 이미지화 해서 정리하는 것이 더 효율적이라고 느껴지는 부분이 있었다. 그러나 현재 사용중인 옵시디언이나 다른 툴들에 관해 무지하기 때문에 그냥 글로 대체하는 부분들이 몇 있었다. 관련 내용을 참조해 보는 게 좋겠다.
